<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <title>Flickr Photo Collage with Ruby | irisquest.net</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/files/favicon.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/files/css/css_3f9f39573157e0b13e45d47f1afa5005.css" />
  <script type="text/javascript" src="/misc/jquery.js?R"></script>
<script type="text/javascript" src="/misc/drupal.js?R"></script>
<script type="text/javascript" src="/sites/all/modules/views/js/base.js?R"></script>
<script type="text/javascript" src="/sites/all/modules/views/js/ajax_view.js?R"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "views": { "ajax_path": "/views/ajax", "ajaxViews": [ { "view_name": "archive", "view_display_id": "block", "view_args": "", "view_path": "node/3", "view_dom_id": 1, "pager_element": 0 } ] } });
//--><!]]>
</script>
    <!--[if IE 6]>
      <style type="text/css" media="all">@import "/sites/all/themes/amadou/ie-fixes/ie6.css";</style>
    <![endif]-->
    <!--[if lt IE 7.]>
      <script defer type="text/javascript" src="/sites/all/themes/amadou/ie-fixes/pngfix.js"></script>
    <![endif]-->

</head>

<body>

  <!-- begin container -->
  <div id="container">

    <!-- primary links -->
    <div id="menu">
              <ul class="links"><li class="first menu-46"><a href="/">Home</a></li>
<li class="menu-59"><a href="/photography">Photography</a></li>
<li class="menu-199"><a href="/reviews/books">Book Reviews</a></li>
<li class="last menu-48"><a href="/contact">Contact</a></li>
</ul>          </div><!-- end primary links -->

    <!-- begin header -->

    <div id="header">

      <!-- site logo -->
      <!-- end site logo -->

      <!-- site name -->
              <h1>
	  <a href="/" title="Home">
	    irisquest.net	  </a>
	</h1>
      <!-- end site name -->
	  
      <!-- site slogan -->
              <h2>
	Photography, books, development and everything in-between - the quest for a new motto	  </h2>
      <!-- end site slogan -->

    </div><!-- end header -->

    <!-- content -->

    <!-- begin mainContent -->
    <div id="mainContent" style="width: 728px;">
        
        <div class="breadcrumb"><div class="breadcrumb"><a href="/">Home</a></div></div>    <h1 class="pageTitle">Flickr Photo Collage with Ruby</h1>                    <div class="node">
  
        
        
          <div class="submitted">
        By Cristi - posted on June 28th, 2007		  and tagged under 	  <span class="taxonomy"><ul class="links inline"><li class="first last taxonomy_term_4"><a href="/development/ruby">Ruby</a></li>
</ul></span>	  
	      </div>
        
        
    <div class="content">
      <div style="float: right; margin: 0 0 0 1em; padding: 0 1em 0m .25em;"><div class="adsense">
<script type="text/javascript"><!--
google_ad_client = "pub-2185931013171127";
/* 250x250 */
google_ad_slot = "3337632434";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div><!-- google_ad_section_start --><p>Yesterday I played a bit with Ruby, <a href="http://rmagick.rubyforge.org/">RMagick</a> and <a href="http://www.flickr.com/services/api/">FlickrAPI</a>. I have to admit that I'm very impressed by the ImageMagick library and the RMagick Ruby bindings seem to work very smooth. It would be interesting to see this combination in a project, maybe with some image caching mechanism in order to reduce the overload of image processing. </p>
<p>Initially I wanted to make a little ruby script that fetches some images from Flickr and creates a bigger image, with the Flickr images arranged in order. But as I was browsing the  RMagick documentation, I discovered `ImageList#montage` function which seemed to do exactly what I wanted. Here's the result, with some comments in place. This script can be extended in order to provide some better looking results - for example it would be interesting to see the names of the image posters, or also some better image effects (shadows, slight rotations in order for the images to appear more natural - eg. <a href="http://rmagick.rubyforge.org/Polaroid/polaroid.html">polaroid effect</a>, etc.)</p>
<p>For accessing the FlickrAPI, I used the <a herf="http://flickraw.rubyforge.org">flickraw library</a> - one of the best FlickrAPI Ruby binding in my opinion. I tried other libraries in the past, but they were either obsolete, or just too buggy. Flickraw provides a low level access to the FlickrAPI, but with a Ruby style syntax. The library is just a wrapper for the FlickrAPI methods  - which means that even if the API will change, the library will most likely continue to work. Many claps to Flickraw's author for choosing this great design.</p>
<p><div class="geshifilter"><pre class="geshifilter-ruby"><span style="color:#008000; font-style:italic;">#!/usr/bin/ruby</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">'flickraw'</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">'open-uri'</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">'RMagick'</span>
&nbsp;
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#008000; font-style:italic;"># Obtain the the photos from Flickr.</span>
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#9966CC; font-weight:bold;">def</span> get_photos<span style="color:#006600; font-weight:bold;">&#40;</span> username, count = <span style="color:#006666;">9</span> <span style="color:#006600; font-weight:bold;">&#41;</span>
  <span style="color:#9966CC; font-weight:bold;">begin</span>
    user = flickr.<span style="color:#9900CC;">people</span>.<span style="color:#9900CC;">findByUsername</span><span style="color:#006600; font-weight:bold;">&#40;</span> <span style="color:#ff3333; font-weight:bold;">:username</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> username <span style="color:#006600; font-weight:bold;">&#41;</span>
    photo_list = flickr.<span style="color:#9900CC;">photos</span>.<span style="color:#9900CC;">getContactsPublicPhotos</span><span style="color:#006600; font-weight:bold;">&#40;</span> <span style="color:#ff3333; font-weight:bold;">:user_id</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> user.<span style="color:#9900CC;">nsid</span>, <span style="color:#ff3333; font-weight:bold;">:count</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">9</span> <span style="color:#006600; font-weight:bold;">&#41;</span>
  <span style="color:#9966CC; font-weight:bold;">rescue</span> <span style="color:#CC00FF; font-weight:bold;">Exception</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> ex
    <span style="color:#CC0066; font-weight:bold;">puts</span> ex
    <span style="color:#0000FF; font-weight:bold;">return</span> <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#006600; font-weight:bold;">&#93;</span>
  <span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
  <span style="color:#0000FF; font-weight:bold;">return</span> photo_list.<span style="color:#9900CC;">slice</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#006666;">0</span>, <span style="color:#006666;">9</span><span style="color:#006600; font-weight:bold;">&#41;</span>
<span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#008000; font-style:italic;"># Construct the URL of the photo, given a photo object as returned by flickraw.</span>
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#9966CC; font-weight:bold;">def</span> photo_url <span style="color:#006600; font-weight:bold;">&#40;</span> photo <span style="color:#006600; font-weight:bold;">&#41;</span>
  <span style="color:#0000FF; font-weight:bold;">return</span> <span style="color:#996600;">&quot;http://farm#{photo.farm}.static.flickr.com/#{photo.server}/#{photo.id}_#{photo.secret}.jpg&quot;</span>
<span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#008000; font-style:italic;"># Download the specified photos. It will use a caching mechanism in order to save </span>
<span style="color:#008000; font-style:italic;"># bandwidth.</span>
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#9966CC; font-weight:bold;">def</span> download_photos<span style="color:#006600; font-weight:bold;">&#40;</span> photo_list <span style="color:#006600; font-weight:bold;">&#41;</span>
  files = <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#006600; font-weight:bold;">&#93;</span>
&nbsp;
  <span style="color:#CC00FF; font-weight:bold;">Dir</span>.<span style="color:#9900CC;">mkdir</span> <span style="color:#996600;">'images'</span> <span style="color:#9966CC; font-weight:bold;">unless</span> <span style="color:#CC00FF; font-weight:bold;">File</span>.<span style="color:#9900CC;">exists</span>?<span style="color:#006600; font-weight:bold;">&#40;</span> <span style="color:#996600;">'images'</span> <span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
  photo_list.<span style="color:#9900CC;">each</span> <span style="color:#9966CC; font-weight:bold;">do</span> <span style="color:#006600; font-weight:bold;">|</span>p<span style="color:#006600; font-weight:bold;">|</span>
    url = photo_url <span style="color:#CC0066; font-weight:bold;">p</span> 
&nbsp;
    fileName = <span style="color:#996600;">'images/'</span> <span style="color:#006600; font-weight:bold;">+</span> <span style="color:#CC00FF; font-weight:bold;">File</span>.<span style="color:#9900CC;">basename</span><span style="color:#006600; font-weight:bold;">&#40;</span> url <span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
    <span style="color:#9966CC; font-weight:bold;">if</span> !<span style="color:#CC00FF; font-weight:bold;">File</span>.<span style="color:#9900CC;">exists</span>?<span style="color:#006600; font-weight:bold;">&#40;</span> fileName <span style="color:#006600; font-weight:bold;">&#41;</span>
      <span style="color:#CC0066; font-weight:bold;">puts</span> url.<span style="color:#9900CC;">to_s</span> <span style="color:#006600; font-weight:bold;">+</span> <span style="color:#996600;">&quot; =&gt; &quot;</span> <span style="color:#006600; font-weight:bold;">+</span> fileName
      <span style="color:#CC0066; font-weight:bold;">open</span> url <span style="color:#9966CC; font-weight:bold;">do</span> <span style="color:#006600; font-weight:bold;">|</span>remote<span style="color:#006600; font-weight:bold;">|</span>
        <span style="color:#CC0066; font-weight:bold;">open</span><span style="color:#006600; font-weight:bold;">&#40;</span>fileName, <span style="color:#996600;">'wb'</span><span style="color:#006600; font-weight:bold;">&#41;</span> <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#006600; font-weight:bold;">|</span>local<span style="color:#006600; font-weight:bold;">|</span> local <span style="color:#006600; font-weight:bold;">&lt;&lt;</span> remote.<span style="color:#9900CC;">read</span> <span style="color:#006600; font-weight:bold;">&#125;</span>
      <span style="color:#9966CC; font-weight:bold;">end</span>
      <span style="color:#9966CC; font-weight:bold;">else</span>
      <span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">&quot;Skipping #{url} because it already exists.&quot;</span>
    <span style="color:#9966CC; font-weight:bold;">end</span>
    files <span style="color:#006600; font-weight:bold;">&lt;&lt;</span> fileName
  <span style="color:#9966CC; font-weight:bold;">end</span>
  <span style="color:#0000FF; font-weight:bold;">return</span> files
<span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#008000; font-style:italic;"># Create the collage, using Magick::ImageList#montage</span>
<span style="color:#008000; font-style:italic;"># method.</span>
<span style="color:#008000; font-style:italic;">#</span>
<span style="color:#9966CC; font-weight:bold;">def</span> create_image<span style="color:#006600; font-weight:bold;">&#40;</span> args = <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#006600; font-weight:bold;">&#125;</span> <span style="color:#006600; font-weight:bold;">&#41;</span>
  <span style="color:#008000; font-style:italic;"># Set some default values</span>
  props = <span style="color:#006600; font-weight:bold;">&#123;</span> 
    <span style="color:#ff3333; font-weight:bold;">:width</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">1024</span>,
    <span style="color:#ff3333; font-weight:bold;">:height</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">768</span>,
    <span style="color:#ff3333; font-weight:bold;">:files</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#0000FF; font-weight:bold;">nil</span>,
    <span style="color:#ff3333; font-weight:bold;">:username</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'unknown-user'</span>,
    <span style="color:#ff3333; font-weight:bold;">:output</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">''</span>,
    <span style="color:#ff3333; font-weight:bold;">:tile_h</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">3</span>,
    <span style="color:#ff3333; font-weight:bold;">:tile_v</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">3</span>
  <span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
  args.<span style="color:#9900CC;">each</span> <span style="color:#006600; font-weight:bold;">&#123;</span> <span style="color:#006600; font-weight:bold;">|</span>k,v<span style="color:#006600; font-weight:bold;">|</span>
    k = k.<span style="color:#9900CC;">to_sym</span>
    <span style="color:#CC0066; font-weight:bold;">raise</span> <span style="color:#CC00FF; font-weight:bold;">ArgumentError</span>, <span style="color:#996600;">&quot;unknown property #{k}&quot;</span> <span style="color:#9966CC; font-weight:bold;">unless</span> props.<span style="color:#9900CC;">key</span>?<span style="color:#006600; font-weight:bold;">&#40;</span>k<span style="color:#006600; font-weight:bold;">&#41;</span>
    props<span style="color:#006600; font-weight:bold;">&#91;</span>k<span style="color:#006600; font-weight:bold;">&#93;</span> = v
  <span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
  props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:output</span><span style="color:#006600; font-weight:bold;">&#93;</span> = props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:username</span><span style="color:#006600; font-weight:bold;">&#93;</span> <span style="color:#006600; font-weight:bold;">+</span> <span style="color:#996600;">'.jpg'</span> <span style="color:#9966CC; font-weight:bold;">unless</span> props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:output</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">length</span> <span style="color:#006600; font-weight:bold;">&gt;</span> <span style="color:#006666;">0</span>
&nbsp;
  <span style="color:#008000; font-style:italic;"># Construct the image list</span>
  image_list = <span style="color:#6666ff; font-weight:bold;">Magick::ImageList</span>.<span style="color:#9900CC;">new</span>
  props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:files</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">each</span> <span style="color:#9966CC; font-weight:bold;">do</span> <span style="color:#006600; font-weight:bold;">|</span>img<span style="color:#006600; font-weight:bold;">|</span>
    image = <span style="color:#6666ff; font-weight:bold;">Magick::Image</span>.<span style="color:#9900CC;">read</span><span style="color:#006600; font-weight:bold;">&#40;</span> img <span style="color:#006600; font-weight:bold;">&#41;</span>.<span style="color:#9900CC;">first</span>
&nbsp;
    <span style="color:#008000; font-style:italic;"># Add a nice, white border around each image</span>
    image.<span style="color:#9900CC;">border</span>!<span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#006666;">30</span>, <span style="color:#006666;">30</span>, <span style="color:#996600;">&quot;#ffffff&quot;</span><span style="color:#006600; font-weight:bold;">&#41;</span>
    image.<span style="color:#9900CC;">background_color</span> = <span style="color:#996600;">&quot;none&quot;</span>
    image_list <span style="color:#006600; font-weight:bold;">&lt;&lt;</span> image
  <span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
  <span style="color:#008000; font-style:italic;"># Compute the placement of the images. Not a very interesting part...</span>
  padding, image_dim = <span style="color:#CC00FF; font-weight:bold;">Hash</span>.<span style="color:#9900CC;">new</span>, <span style="color:#CC00FF; font-weight:bold;">Hash</span>.<span style="color:#9900CC;">new</span>
  padding<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:x</span><span style="color:#006600; font-weight:bold;">&#93;</span>, padding<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:y</span><span style="color:#006600; font-weight:bold;">&#93;</span> = props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:width</span><span style="color:#006600; font-weight:bold;">&#93;</span> <span style="color:#006600; font-weight:bold;">*</span> <span style="color:#006666;">0.05</span>, props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:height</span><span style="color:#006600; font-weight:bold;">&#93;</span> <span style="color:#006600; font-weight:bold;">*</span> <span style="color:#006666;">0.05</span>
  image_dim<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:width</span><span style="color:#006600; font-weight:bold;">&#93;</span>, image_dim<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:height</span><span style="color:#006600; font-weight:bold;">&#93;</span> = <span style="color:#006600; font-weight:bold;">&#40;</span>props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:width</span><span style="color:#006600; font-weight:bold;">&#93;</span> <span style="color:#006600; font-weight:bold;">-</span> <span style="color:#006666;">6</span><span style="color:#006600; font-weight:bold;">*</span>padding<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:x</span><span style="color:#006600; font-weight:bold;">&#93;</span><span style="color:#006600; font-weight:bold;">&#41;</span> <span style="color:#006600; font-weight:bold;">/</span> props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:tile_h</span><span style="color:#006600; font-weight:bold;">&#93;</span>, <span style="color:#006600; font-weight:bold;">&#40;</span>props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:height</span><span style="color:#006600; font-weight:bold;">&#93;</span> <span style="color:#006600; font-weight:bold;">-</span> <span style="color:#006666;">6</span><span style="color:#006600; font-weight:bold;">*</span>padding<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:y</span><span style="color:#006600; font-weight:bold;">&#93;</span><span style="color:#006600; font-weight:bold;">&#41;</span> <span style="color:#006600; font-weight:bold;">/</span> props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:tile_v</span><span style="color:#006600; font-weight:bold;">&#93;</span>
&nbsp;
  <span style="color:#008000; font-style:italic;"># Construct the montage.</span>
  image_list = image_list.<span style="color:#9900CC;">montage</span> <span style="color:#9966CC; font-weight:bold;">do</span>
    <span style="color:#0000FF; font-weight:bold;">self</span>.<span style="color:#9900CC;">tile</span> = <span style="color:#996600;">&quot;#{props[:tile_h]}x#{props[:tile_v]}&quot;</span>
    <span style="color:#0000FF; font-weight:bold;">self</span>.<span style="color:#9900CC;">background_color</span> = <span style="color:#996600;">'#000000'</span>
    <span style="color:#0000FF; font-weight:bold;">self</span>.<span style="color:#9900CC;">geometry</span> = <span style="color:#996600;">&quot;#{image_dim[:width]}x#{image_dim[:height]}+#{padding[:x]}+#{padding[:y]}&quot;</span>
    <span style="color:#0000FF; font-weight:bold;">self</span>.<span style="color:#9900CC;">shadow</span> = <span style="color:#0000FF; font-weight:bold;">true</span>
  <span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
  <span style="color:#008000; font-style:italic;"># Flatten everything and write it to a file.</span>
  image = image_list.<span style="color:#9900CC;">flatten_images</span>
  image.<span style="color:#9900CC;">resize</span>!<span style="color:#006600; font-weight:bold;">&#40;</span> props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:width</span><span style="color:#006600; font-weight:bold;">&#93;</span>, props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:height</span><span style="color:#006600; font-weight:bold;">&#93;</span> <span style="color:#006600; font-weight:bold;">&#41;</span>
  image.<span style="color:#9900CC;">write</span><span style="color:#006600; font-weight:bold;">&#40;</span> props<span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#ff3333; font-weight:bold;">:output</span><span style="color:#006600; font-weight:bold;">&#93;</span> <span style="color:#006600; font-weight:bold;">&#41;</span>
<span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># Check the number of parameters</span>
<span style="color:#9966CC; font-weight:bold;">if</span> ARGV.<span style="color:#9900CC;">length</span> <span style="color:#006600; font-weight:bold;">&lt;</span>= <span style="color:#006666;">0</span>
  <span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">&quot;Not enough arguments.&quot;</span>
  <span style="color:#CC0066; font-weight:bold;">exit</span>
<span style="color:#9966CC; font-weight:bold;">end</span>
&nbsp;
<span style="color:#008000; font-style:italic;"># Main body</span>
username = ARGV.<span style="color:#9900CC;">first</span>
photos = get_photos<span style="color:#006600; font-weight:bold;">&#40;</span> username <span style="color:#006600; font-weight:bold;">&#41;</span>
image_files = download_photos<span style="color:#006600; font-weight:bold;">&#40;</span> photos <span style="color:#006600; font-weight:bold;">&#41;</span>
create_image<span style="color:#006600; font-weight:bold;">&#40;</span> <span style="color:#ff3333; font-weight:bold;">:files</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> image_files, <span style="color:#ff3333; font-weight:bold;">:username</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> username, <span style="color:#ff3333; font-weight:bold;">:width</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">400</span>, <span style="color:#ff3333; font-weight:bold;">:height</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#006666;">300</span> <span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></p>
<!-- google_ad_section_end --><br class="clear"/><div class="adsense">
<script type="text/javascript"><!--
google_ad_client = "pub-2185931013171127";
/* 728x90 */
google_ad_slot = "9482149249";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div><br class="clear" />    </div>
    
          <div class="links">
        <ul class="links inline"><li class="first last comment_add"><a href="/comment/reply/3">Add new comment</a></li>
</ul>      </div>
        
  </div>
<div id="comments">
  <a id="comment-6"></a>
  <div class="comment odd">
  
    
    
    <div class="commentTitle">
      <a href="/2007/06/flickr-photo-collage-ruby#comment-6" class="active">Help about using Flickraw</a>    </div>

    <div class="submitted">
      Submitted by Jorge (not verified) on Tue, 08/19/2008 - 23:43.    </div>

    <div class="content">
      <p>Hello Cristi,<br />
I was reading you used flickraw and i am trying to use it too but I am having errors.<br />
May you help me trying to understand what I am doing wrong?<br />
Thank you in advance.<br />
Best,<br />
Jorge</p>
          </div>

    <div class="links">
      <ul class="links"><li class="first last comment_reply"><a href="/comment/reply/3/6">reply</a></li>
</ul>    </div>
  </div>
  
<div class="indented"><a id="comment-7"></a>
  <div class="comment even">
  
    
    
    <div class="commentTitle">
      <a href="/2007/06/flickr-photo-collage-ruby#comment-7" class="active">Flickraw</a>    </div>

    <div class="submitted">
      Submitted by Cristi on Fri, 08/22/2008 - 22:59.    </div>

    <div class="content">
      <p>Hi Jorge,</p>
<p>Can you provide more details about those errors? I've just tried to the flickraw part from the posted script and it appears to be still working (albeit it's a bit old). Not sure about the RMagick part, since I didn't have enough time to install it. </p>
<p>Be sure to install the flickraw gem first:</p>
<p><div class="geshifilter"><pre class="geshifilter-text">gem install flickraw</pre></div></p>
<p>Let me know if you're still having troubles.</p>
<p>Regards,<br />
Cristi</p>
          </div>

    <div class="links">
      <ul class="links"><li class="first last comment_reply"><a href="/comment/reply/3/7">reply</a></li>
</ul>    </div>
  </div>
  
</div></div>
        
    </div><!-- end mainContent -->

    <!-- begin sideBars -->

    <div id="sideBars-bg" style="width: 210px;">
      <div id="sideBars" style="width: 210px;">

        <!-- left sidebar -->
                  <div id="leftSidebar">
              <div class="block block-search" id="block-search-0">
    <h2 class="title">
      Search    </h2>
    <div class="content">
      <form action="/2007/06/flickr-photo-collage-ruby"  accept-charset="UTF-8" method="post" id="search-block-form">
<div><div class="container-inline">
  <div class="form-item" id="edit-search-block-form-1-wrapper">
 <label for="edit-search-block-form-1">Search this site: </label>
 <input type="text" maxlength="128" name="search_block_form" id="edit-search-block-form-1" size="15" value="" title="Enter the terms you wish to search for." class="form-text" />
</div>
<input type="submit" name="op" id="edit-submit" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-867e712093dcf5c3e0e686895cbdee65" value="form-867e712093dcf5c3e0e686895cbdee65"  />
<input type="hidden" name="form_id" id="edit-search-block-form" value="search_block_form"  />
</div>

</div></form>
    </div>
  </div>
  <div class="block block-image" id="block-image-1">
    <h2 class="title">
      Random image    </h2>
    <div class="content">
      <a href="/2007/09/lost-toy"><img src="http://blog.irisquest.net/files/images/Orphanage---Lost-Toy.thumbnail.jpg" alt="Lost toy" title="Lost toy"  class="image image-thumbnail " width="170" height="113" /></a>    </div>
  </div>
  <div class="block block-views" id="block-views-archive-block">
    <h2 class="title">
      Archive    </h2>
    <div class="content">
      <div class="view view-archive view-id-archive view-display-id-block view-dom-id-1">
    
  
  
      <div class="view-content">
      <div class="item-list">
  <ul>
      <li><a href="/archive/201008">August, 2010</a>
              (1)
          </li>
      <li><a href="/archive/201006">June, 2010</a>
              (1)
          </li>
      <li><a href="/archive/201002">February, 2010</a>
              (1)
          </li>
      <li><a href="/archive/201001">January, 2010</a>
              (1)
          </li>
      <li><a href="/archive/200912">December, 2009</a>
              (1)
          </li>
      <li><a href="/archive/200906">June, 2009</a>
              (1)
          </li>
      <li><a href="/archive/200905">May, 2009</a>
              (4)
          </li>
      <li><a href="/archive/200904">April, 2009</a>
              (2)
          </li>
      <li><a href="/archive/200812">December, 2008</a>
              (2)
          </li>
      <li><a href="/archive/200811">November, 2008</a>
              (1)
          </li>
    </ul>
</div>
    </div>
  
  
  
      
<div class="more-link">
  <a href="/archive">
    more  </a>
</div>
  
  
  
</div>     </div>
  </div>
  <div class="block block-views" id="block-views-Random_Articles-block_1">
    <h2 class="title">
      Other articles    </h2>
    <div class="content">
      <div class="view view-Random-Articles view-id-Random_Articles view-display-id-block_1 view-dom-id-2">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row-1 views-row-odd views-row-first">  
  <div class="views-field-title">
                <span class="field-content"><a href="/2008/01/once-upon-time-castle">Once upon a time, at the castle</a></span>
  </div>
</li>
          <li class="views-row-2 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="/2007/08/last-fm-api-gathering-artist-tags-ruby">Last.fm API - gathering artist tags with Ruby</a></span>
  </div>
</li>
          <li class="views-row-3 views-row-odd">  
  <div class="views-field-title">
                <span class="field-content"><a href="/2008/06/upgrading-drupal-6-image-module">Upgrading to Drupal 6: the Image Module</a></span>
  </div>
</li>
          <li class="views-row-4 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="/2007/12/parias-or-temptation-india-pascal-bruckner">&quot;Parias, or the temptation of India&quot;, by Pascal Bruckner</a></span>
  </div>
</li>
          <li class="views-row-5 views-row-odd">  
  <div class="views-field-title">
                <span class="field-content"><a href="/2007/06/mephisto">Mephisto</a></span>
  </div>
</li>
          <li class="views-row-6 views-row-even views-row-last">  
  <div class="views-field-title">
                <span class="field-content"><a href="/2010/01/quotthe-roadquot-cormac-mccarthy">&quot;The Road&quot; by Cormac McCarthy</a></span>
  </div>
</li>
      </ul>
</div>    </div>
  
  
  
  
  
  
</div>     </div>
  </div>
  <div class="block block-views" id="block-views-comments_recent-block">
    <h2 class="title">
      Recent comments    </h2>
    <div class="content">
      <div class="view view-comments-recent view-id-comments_recent view-display-id-block view-dom-id-3">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row-1 views-row-odd views-row-first">  
  <div class="views-field-subject">
                <span class="field-content"><a href="/2007/08/not-all-antivirus-tools-are-equal#comment-47">answer this post</a></span>
  </div>
  
  <div class="views-field-timestamp">
                <span class="field-content"><em>10 hours 30 min</em> ago</span>
  </div>
</li>
          <li class="views-row-2 views-row-even">  
  <div class="views-field-subject">
                <span class="field-content"><a href="/2009/12/quotbrave-new-worldquot-aldous-huxley#comment-46">respond this topic</a></span>
  </div>
  
  <div class="views-field-timestamp">
                <span class="field-content"><em>15 hours 40 min</em> ago</span>
  </div>
</li>
          <li class="views-row-3 views-row-odd">  
  <div class="views-field-subject">
                <span class="field-content"><a href="/2008/05/ubuntu-organize-photos-folders-date#comment-44">Thanks!</a></span>
  </div>
  
  <div class="views-field-timestamp">
                <span class="field-content"><em>11 weeks 3 days</em> ago</span>
  </div>
</li>
          <li class="views-row-4 views-row-even">  
  <div class="views-field-subject">
                <span class="field-content"><a href="/2008/06/gimp-copy-layer-mask-another-layer#comment-36">Thank you so much for posting</a></span>
  </div>
  
  <div class="views-field-timestamp">
                <span class="field-content"><em>30 weeks 1 day</em> ago</span>
  </div>
</li>
          <li class="views-row-5 views-row-odd views-row-last">  
  <div class="views-field-subject">
                <span class="field-content"><a href="/2008/02/gimp-using-image-layer-layer-mask#comment-35">thanks</a></span>
  </div>
  
  <div class="views-field-timestamp">
                <span class="field-content"><em>32 weeks 2 days</em> ago</span>
  </div>
</li>
      </ul>
</div>    </div>
  
  
  
      
<div class="more-link">
  <a href="/comments/recent">
    more  </a>
</div>
  
  
  
</div>     </div>
  </div>
  <div class="block block-node" id="block-node-0">
    <h2 class="title">
      Syndicate    </h2>
    <div class="content">
      <a href="/rss.xml" class="feed-icon"><img src="/misc/feed.png" alt="Syndicate content" title="Syndicate" width="16" height="16" /></a>    </div>
  </div>
          </div>
                
        <!-- right sidebar -->
        
      </div><!-- end sideBars -->
    </div><!-- end sideBars-bg -->
    


    <!-- footer -->
    <div id="footer">
              <div class="block block-block" id="block-block-1">
    <h2 class="title">
          </h2>
    <div class="content">
      <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
      _uacct = "UA-2134076-1";
      urchinTracker();
</script>    </div>
  </div>
    </div><!-- end footer -->
    
  </div><!-- end container -->
  
  </body>
</html>
